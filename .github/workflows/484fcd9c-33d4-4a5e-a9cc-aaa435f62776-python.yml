# This workflow will install Python dependencies, run tests and lint with a variety of Python versions
# For more information see: https://docs.github.com/en/actions/automating-builds-and-tests/building-and-testing-python

name: Python package

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build:

    runs-on: ubuntu-latest
    strategy:
      max-parallel: 2
      fail-fast: false

    steps:
    - uses: actions/checkout@v4
    - name: Set up Python ${{ matrix.python-version }}
      uses: actions/setup-python@v3
      with:
        python-version: "3.12"
    - name: Get site-packages location
      id: site
      run: |
        python -c 'import site; print("path="+site.getsitepackages()[0])' >> "$GITHUB_OUTPUT"
    - uses: actions/cache@v4
      id: cache
      with:
        path: ${{ steps.site.outputs.path }}
        key: ${{ runner.os }}-new-pip-${{ hashFiles('**/requirements.txt') }}
        restore-keys: |
          ${{ runner.os }}-new-pip-
    - name: Install dependencies
      if: steps.cache.outputs.cache-hit != 'true'
      run: |
        python -m pip install --upgrade pip
        if [ -f requirements.txt ]; then pip install -r requirements.txt; fi
    - uses: actions/cache@v4
      if: steps.cache.outputs.cache-hit != 'true'
      with:
        path: ${{ steps.site.outputs.path }}
        key: ${{ runner.os }}-new-pip-${{ hashFiles('**/requirements.txt') }}
        restore-keys: |
          ${{ runner.os }}-new-pip-
    - name: Запуск для Сувернева Елизавета Валерьевна
      run: "python main.py 44758"
    - name: Запуск для Детский образцово-художественный ансамбль «ВЕСНУШКИ»
      run: "python main.py 49340"
    - name: Запуск для Каргаев Дзабо Русланович
      run: "python main.py 49464"
    - name: Запуск для Ансамбль национального танца «Амир»
      run: "python main.py 49335"
    - name: Запуск для Вокально-инструментальная группа «Встреча»
      run: "python main.py 49477"
    - name: Запуск для Мартиросян Арина
      run: "python main.py 44476"
    - name: Запуск для Образцовый ансамбль танца «Насып-Малка»
      run: "python main.py 44198"
    - name: Запуск для Студия эстетического движения «Кристалл»
      run: "python main.py 43811"
    - name: Запуск для Бжассо Дана Рустамовна
      run: "python main.py 49485"
    - name: Запуск для Канивец Ариана Алексеевна
      run: "python main.py 49362"
    - name: Запуск для Гедмишхов Заурбек Асланбекович
      run: "python main.py 46848"
    - name: Запуск для Кулькова Яна
      run: "python main.py 43824"
    - name: Запуск для Косякова Анна
      run: "python main.py 49478"
    - name: Запуск для Косякова Юлия
      run: "python main.py 49479"
    - name: Запуск для Танцевально-спортивный центр Beststar MamaGeraKidsProfi
      run: "python main.py 44608"
    - name: Запуск для Асатурянц Милана Николаевна
      run: "python main.py 44074"
    - name: Запуск для Хореографический коллектив эстрадного танца «Альянс»
      run: "python main.py 49475"
    - name: Запуск для Камалян Лариса Эмилевна
      run: "python main.py 49480"
    - name: Запуск для Мельник Злата Олеговна
      run: "python main.py 49481"
    - name: Запуск для Тимербаева Таисия Сергеевна
      run: "python main.py 44763"
    - name: Запуск для Образцовый ансамбль танца «СмоРодина»
      run: "python main.py 44761"

